"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[4800,2209],{99220:function(e,t,n){n.d(t,{m:function(){return d}});var a=n(93433),r=n(29439),i=n(72791),s=n(89114),o=n(93490),l=n(54225),d=function(e,t,n){var d=(0,i.useState)(void 0),c=(0,r.Z)(d,2),u=c[0],p=c[1],m=(0,i.useState)(void 0),f=(0,r.Z)(m,2),h=f[0],v=f[1],g=(0,s.H)(),y=g.updateRequested,x=g.finishUpdate,j=(0,o.A)().refreshBarrierMs,U=function(){var e=(0,o.A)().datastore;e&&!e.dataByMethod&&(e.dataByMethod={}),e&&!e.lastUpdateByMethod&&(e.lastUpdateByMethod={}),e&&!e.currentlyUpdatingMethods&&(e.currentlyUpdatingMethods={});var t=(0,i.useCallback)((function(t,n){var a=Boolean(e.dataByMethod[t]);return n&&(e.lastUpdateByMethod[t]=n.timestamp,e.dataByMethod[t]=n),a}),[e]),n=(0,i.useCallback)((function(t){return null===e||void 0===e?void 0:e.lastUpdateByMethod[t]}),[e]),a=(0,i.useCallback)((function(t){return null===e||void 0===e?void 0:e.dataByMethod[t]}),[e]),r=(0,i.useCallback)((function(t){return e&&Boolean(e.currentlyUpdatingMethods[t])}),[e]),s=(0,i.useCallback)((function(t){e.currentlyUpdatingMethods[t]=!0}),[e]),l=(0,i.useCallback)((function(t){delete e.currentlyUpdatingMethods[t]}),[e]);return{storeData:t,getLastUpdate:n,getData:a,isCurrentlyUpdating:r,isSomethingUpdating:(0,i.useCallback)((function(){return e&&Boolean(Object.values(e.currentlyUpdatingMethods).filter((function(e){return Boolean(e)})).length)}),[e]),setAsUpdating:s,finishUpdate:l}}();return(0,i.useEffect)((function(){if(void 0===n||n){U.setAsUpdating(e);var r=function n(r,i,s,o){if(r){var d=r.timestamp;if(!l.vT&&d)d+(j||15e3)<y?setTimeout((function(){e.apply(void 0,[(new Date).getTime()].concat((0,a.Z)(t))).then((function(e){var t=e.data,a=e.error;n(t,a,!0,o>=12e3?o:2*o)}))}),o):(p(r),U.storeData(e,r),U.finishUpdate(e),x(r.timestamp,r.timestamp_f,U.isSomethingUpdating())),s||(p(r),U.storeData(e,r),x(r.timestamp,r.timestamp_f,U.isSomethingUpdating()));else p(r),U.finishUpdate(e),x(r.timestamp,r.timestamp_f,U.isSomethingUpdating())}else i&&(console.warn(i),U.finishUpdate(e),v(i),x(0,"Error: "+i.message,U.isSomethingUpdating()))};e.apply(void 0,[y].concat((0,a.Z)(t))).then((function(e){var t=e.data,n=e.error;r(t,n,!1,1e3)}))}else p(void 0)}),[e,t.length].concat((0,a.Z)(t),[y,j,n])),{data:u,loadingError:h}}},72209:function(e,t,n){n.r(t);n(72791);var a=n(75854),r=n(90055),i=n(28782),s=n(8995),o=n(80184);t.default=function(e){var t=e.error;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Z,{page:"Error occurred",items:[]}),(0,o.jsxs)("div",{className:"d-flex flex-column",id:"content-wrapper",children:[(0,o.jsx)(r.Z,{page:t.title?t.title:"Unexpected error occurred",hideUpdater:!0}),(0,o.jsxs)("div",{id:"content",style:{display:"flex"},children:[(0,o.jsx)("main",{className:"container-fluid mt-4",children:(0,o.jsx)(i.ZP,{error:t})}),(0,o.jsx)("aside",{children:(0,o.jsx)(s.Z,{})})]})]})]})}},54800:function(e,t,n){n.r(t),n.d(t,{default:function(){return k},usePlayer:function(){return b}});var a=n(72791),r=n(75854),i=n(57689),s=n(8995),o=n(74165),l=n(15861),d=n(11632),c=n(54225),u=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(t,n){var a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/v1/player?player=".concat(n),c.vT&&(a="/player/".concat(n,"/player-").concat(n,".json")),e.abrupt("return",(0,c.K4)(a,t,[c.hD,{status:c.vT?404:400,get:function(){return{message:"Player not found: "+n+", try another player."+(c.vT?" You can try the export players command.":""),title:"404 Player not found",icon:d.SuH}}}]));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=n(90055),m=n(89114),f=n(39230),h=n(16850),v=n(99220),g=n(72209),y=n(61636),x=n(87626),j=n(80184),U=a.lazy((function(){return Promise.all([n.e(5193),n.e(2457),n.e(8002),n.e(4260)]).then(n.bind(n,24260))})),b=function(){return(0,i.bx)()},k=function(){var e,t,n=(0,f.$G)(),o=n.t,l=n.i18n,c=(0,(0,y.a)().hasChildPermission)("access.player"),b=(0,m.H)(),k=b.sidebarItems,B=b.setSidebarItems,M=(0,i.UO)().identifier,Z=(0,m.H)(),w=Z.currentTab,C=Z.finishUpdate,N=(0,v.m)(u,[M],c),S=N.data,P=N.loadingError;(0,a.useEffect)((function(){var e,t;if(S){var n=[{name:"html.label.playerOverview",icon:d.sqG,href:"overview",permission:"page.player.overview"},{name:"html.label.sessions",icon:h.Ry6,href:"sessions",permission:"page.player.sessions"},{name:"html.label.pvpPve",icon:d.vym,href:"pvppve",permission:"page.player.versus"},{name:"html.label.servers",icon:d.kXW,href:"servers",permission:"page.player.servers"}];n.push({name:"html.label.plugins",permission:"page.player.plugins",icon:d.NkB,contents:null===S||void 0===S||null===(e=S.extensions)||void 0===e?void 0:e.filter((function(e){var t;return null===e||void 0===e||null===(t=e.extensionData)||void 0===t?void 0:t.length})).map((function(e){return{name:"".concat(o("html.label.plugins")," (").concat(e.serverName,")"),icon:d.NkB,href:"plugins/".concat(encodeURIComponent(e.serverName)),permission:"page.player.plugins"}}))}),B(n),window.document.title="Plan | ".concat(null===S||void 0===S||null===(t=S.info)||void 0===t?void 0:t.name),C(S.timestamp,S.timestamp_f)}}),[S,o,l,C,B]);var D=(0,y.a)(),T=D.authRequired,E=D.loggedIn;return T&&!E?(0,j.jsx)(x.Z,{}):P?(0,j.jsx)(g.default,{error:P}):S?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.Z,{page:null===S||void 0===S||null===(e=S.info)||void 0===e?void 0:e.name,items:k}),(0,j.jsxs)("div",{className:"d-flex flex-column",id:"content-wrapper",children:[(0,j.jsx)(p.Z,{page:null===S||void 0===S||null===(t=S.info)||void 0===t?void 0:t.name,tab:w}),(0,j.jsxs)("div",{id:"content",style:{display:"flex"},children:[(0,j.jsx)("main",{className:"container-fluid mt-4",children:(0,j.jsx)(i.j3,{context:{player:S}})}),(0,j.jsxs)("aside",{children:[(0,j.jsx)(s.Z,{}),(0,j.jsx)(a.Suspense,{fallback:"",children:(0,j.jsx)(U,{})})]})]})]})]}):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"page-loader",children:(0,j.jsxs)("div",{className:"loader-container",children:[(0,j.jsx)("span",{className:"loader"}),(0,j.jsx)("p",{className:"loader-text",children:"Please wait.."})]})})})}}}]);
//# sourceMappingURL=4800.d0d623b3.chunk.js.map
