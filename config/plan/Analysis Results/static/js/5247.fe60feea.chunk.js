"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[5247,4800,2209],{99220:function(e,n,t){t.d(n,{m:function(){return d}});var a=t(93433),r=t(29439),i=t(72791),s=t(89114),o=t(93490),l=t(54225),d=function(e,n,t){var d=(0,i.useState)(void 0),c=(0,r.Z)(d,2),u=c[0],p=c[1],m=(0,i.useState)(void 0),f=(0,r.Z)(m,2),h=f[0],v=f[1],x=(0,s.H)(),y=x.updateRequested,g=x.finishUpdate,j=(0,o.A)().refreshBarrierMs,U=function(){var e=(0,o.A)().datastore;e&&!e.dataByMethod&&(e.dataByMethod={}),e&&!e.lastUpdateByMethod&&(e.lastUpdateByMethod={}),e&&!e.currentlyUpdatingMethods&&(e.currentlyUpdatingMethods={});var n=(0,i.useCallback)((function(n,t){var a=Boolean(e.dataByMethod[n]);return t&&(e.lastUpdateByMethod[n]=t.timestamp,e.dataByMethod[n]=t),a}),[e]),t=(0,i.useCallback)((function(n){return null===e||void 0===e?void 0:e.lastUpdateByMethod[n]}),[e]),a=(0,i.useCallback)((function(n){return null===e||void 0===e?void 0:e.dataByMethod[n]}),[e]),r=(0,i.useCallback)((function(n){return e&&Boolean(e.currentlyUpdatingMethods[n])}),[e]),s=(0,i.useCallback)((function(n){e.currentlyUpdatingMethods[n]=!0}),[e]),l=(0,i.useCallback)((function(n){delete e.currentlyUpdatingMethods[n]}),[e]);return{storeData:n,getLastUpdate:t,getData:a,isCurrentlyUpdating:r,isSomethingUpdating:(0,i.useCallback)((function(){return e&&Boolean(Object.values(e.currentlyUpdatingMethods).filter((function(e){return Boolean(e)})).length)}),[e]),setAsUpdating:s,finishUpdate:l}}();return(0,i.useEffect)((function(){if(void 0===t||t){U.setAsUpdating(e);var r=function t(r,i,s,o){if(r){var d=r.timestamp;if(!l.vT&&d)d+(j||15e3)<y?setTimeout((function(){e.apply(void 0,[(new Date).getTime()].concat((0,a.Z)(n))).then((function(e){var n=e.data,a=e.error;t(n,a,!0,o>=12e3?o:2*o)}))}),o):(p(r),U.storeData(e,r),U.finishUpdate(e),g(r.timestamp,r.timestamp_f,U.isSomethingUpdating())),s||(p(r),U.storeData(e,r),g(r.timestamp,r.timestamp_f,U.isSomethingUpdating()));else p(r),U.finishUpdate(e),g(r.timestamp,r.timestamp_f,U.isSomethingUpdating())}else i&&(console.warn(i),U.finishUpdate(e),v(i),g(0,"Error: "+i.message,U.isSomethingUpdating()))};e.apply(void 0,[y].concat((0,a.Z)(n))).then((function(e){var n=e.data,t=e.error;r(n,t,!1,1e3)}))}else p(void 0)}),[e,n.length].concat((0,a.Z)(n),[y,j,t])),{data:u,loadingError:h}}},72209:function(e,n,t){t.r(n);t(72791);var a=t(75854),r=t(90055),i=t(28782),s=t(8995),o=t(80184);n.default=function(e){var n=e.error;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Z,{page:"Error occurred",items:[]}),(0,o.jsxs)("div",{className:"d-flex flex-column",id:"content-wrapper",children:[(0,o.jsx)(r.Z,{page:n.title?n.title:"Unexpected error occurred",hideUpdater:!0}),(0,o.jsxs)("div",{id:"content",style:{display:"flex"},children:[(0,o.jsx)("main",{className:"container-fluid mt-4",children:(0,o.jsx)(i.ZP,{error:n})}),(0,o.jsx)("aside",{children:(0,o.jsx)(s.Z,{})})]})]})]})}},54800:function(e,n,t){t.r(n),t.d(n,{default:function(){return Z},usePlayer:function(){return b}});var a=t(72791),r=t(75854),i=t(57689),s=t(8995),o=t(74165),l=t(15861),d=t(11632),c=t(54225),u=function(){var e=(0,l.Z)((0,o.Z)().mark((function e(n,t){var a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/v1/player?player=".concat(t),c.vT&&(a="/player/".concat(t,"/player-").concat(t,".json")),e.abrupt("return",(0,c.K4)(a,n,[c.hD,{status:c.vT?404:400,get:function(){return{message:"Player not found: "+t+", try another player."+(c.vT?" You can try the export players command.":""),title:"404 Player not found",icon:d.SuH}}}]));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),p=t(90055),m=t(89114),f=t(39230),h=t(16850),v=t(99220),x=t(72209),y=t(61636),g=t(87626),j=t(80184),U=a.lazy((function(){return Promise.all([t.e(5193),t.e(2457),t.e(8002),t.e(4260)]).then(t.bind(t,24260))})),b=function(){return(0,i.bx)()},Z=function(){var e,n,t=(0,f.$G)(),o=t.t,l=t.i18n,c=(0,(0,y.a)().hasChildPermission)("access.player"),b=(0,m.H)(),Z=b.sidebarItems,w=b.setSidebarItems,B=(0,i.UO)().identifier,N=(0,m.H)(),k=N.currentTab,M=N.finishUpdate,P=(0,v.m)(u,[B],c),C=P.data,S=P.loadingError;(0,a.useEffect)((function(){var e,n;if(C){var t=[{name:"html.label.playerOverview",icon:d.sqG,href:"overview",permission:"page.player.overview"},{name:"html.label.sessions",icon:h.Ry6,href:"sessions",permission:"page.player.sessions"},{name:"html.label.pvpPve",icon:d.vym,href:"pvppve",permission:"page.player.versus"},{name:"html.label.servers",icon:d.kXW,href:"servers",permission:"page.player.servers"}];t.push({name:"html.label.plugins",permission:"page.player.plugins",icon:d.NkB,contents:null===C||void 0===C||null===(e=C.extensions)||void 0===e?void 0:e.filter((function(e){var n;return null===e||void 0===e||null===(n=e.extensionData)||void 0===n?void 0:n.length})).map((function(e){return{name:"".concat(o("html.label.plugins")," (").concat(e.serverName,")"),icon:d.NkB,href:"plugins/".concat(encodeURIComponent(e.serverName)),permission:"page.player.plugins"}}))}),w(t),window.document.title="Plan | ".concat(null===C||void 0===C||null===(n=C.info)||void 0===n?void 0:n.name),M(C.timestamp,C.timestamp_f)}}),[C,o,l,M,w]);var D=(0,y.a)(),E=D.authRequired,_=D.loggedIn;return E&&!_?(0,j.jsx)(g.Z,{}):S?(0,j.jsx)(x.default,{error:S}):C?(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(r.Z,{page:null===C||void 0===C||null===(e=C.info)||void 0===e?void 0:e.name,items:Z}),(0,j.jsxs)("div",{className:"d-flex flex-column",id:"content-wrapper",children:[(0,j.jsx)(p.Z,{page:null===C||void 0===C||null===(n=C.info)||void 0===n?void 0:n.name,tab:k}),(0,j.jsxs)("div",{id:"content",style:{display:"flex"},children:[(0,j.jsx)("main",{className:"container-fluid mt-4",children:(0,j.jsx)(i.j3,{context:{player:C}})}),(0,j.jsxs)("aside",{children:[(0,j.jsx)(s.Z,{}),(0,j.jsx)(a.Suspense,{fallback:"",children:(0,j.jsx)(U,{})})]})]})]})]}):(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",{className:"page-loader",children:(0,j.jsxs)("div",{className:"loader-container",children:[(0,j.jsx)("span",{className:"loader"}),(0,j.jsx)("p",{className:"loader-text",children:"Please wait.."})]})})})}},5247:function(e,n,t){t.r(n);var a=t(72791),r=t(74314),i=t(89743),s=t(2677),o=t(28282),l=t(57689),d=t(23533),c=t.n(d),u=t(54800),p=t(51425),m=t(61636),f=t(80184);n.default=function(){var e,n,t=(0,m.a)().hasPermission,d=(0,u.usePlayer)().player,h=(0,l.UO)().serverName,v=d.extensions?d.extensions.find((function(e){return e.serverName===h})):{};return(0,a.useEffect)((function(){var e=document.getElementById("extension-masonry-row");if(e){var n=c().data(e);return n||(n=new(c())(e,{percentPosition:!0,itemSelector:".extension-wrapper"})),function(){n.element&&n.destroy()}}}),[h]),t("page.player.plugins")?null!==v&&void 0!==v&&null!==(e=v.extensionData)&&void 0!==e&&e.length?(0,f.jsx)(p.Z,{children:(0,f.jsx)("section",{className:"player_plugin_data",id:"player-plugin-data",children:(0,f.jsx)(i.Z,{id:"extension-masonry-row","data-masonry":'{"percentPosition": true, "itemSelector": ".extension-wrapper"}',style:{overflowY:"hidden"},children:null===v||void 0===v||null===(n=v.extensionData)||void 0===n?void 0:n.map((function(e,n){return(0,f.jsx)(r.xP,{extension:e,children:(0,f.jsx)(r.ZP,{extension:e})},"ext-"+n)}))})})}):(0,f.jsx)(p.Z,{children:(0,f.jsx)("section",{className:"player_plugin_data",id:"player-plugin-data",children:(0,f.jsx)(i.Z,{style:{overflowY:"hidden"},children:(0,f.jsx)(s.Z,{md:12,children:(0,f.jsx)(o.Z,{children:(0,f.jsx)(o.Z.Body,{children:(0,f.jsxs)("p",{children:["No Extension data for ",h]})})})})})})}):(0,f.jsx)(f.Fragment,{})}}}]);
//# sourceMappingURL=5247.fe60feea.chunk.js.map
