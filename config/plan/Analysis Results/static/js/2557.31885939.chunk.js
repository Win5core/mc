"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[2557],{35751:function(e,r,n){var t=n(37762),s=n(29439),a=n(76308),o=n(72791),i=n(98442),c=n(67179),l=n.n(c),u=n(41900),p=n.n(u),v=n(75193),d=n.n(v),f=n(39230),m=n(93490),h=n(80184);r.Z=function(e){var r=e.id,n=e.series,c=e.legendEnabled,u=e.tall,v=e.yAxis,x=e.selectedRange,b=e.extremes,y=e.onSetExtremes,k=e.alreadyOffsetTimezone,w=e.options,Z=e.extraModules,g=(0,f.$G)().t,j=(0,a.Fg)(),A=j.graphTheming,S=j.nightModeEnabled,N=(0,m.A)().timeZoneOffsetMinutes,O=(0,o.useState)(void 0),E=(0,s.Z)(O,2),T=E[0],z=E[1];(0,o.useEffect)((function(){if(p()(l()),d()(l()),Z){var e,s=(0,t.Z)(Z);try{for(s.s();!(e=s.n()).done;){(0,e.value)(l())}}catch(a){s.e(a)}finally{s.f()}}l().setOptions({lang:{noData:g("html.label.noDataToDisplay")}}),l().setOptions(A),z(l().stockChart(r,w||{chart:{noData:g("html.label.noDataToDisplay")},rangeSelector:{selected:void 0!==x?x:2,buttons:i.AA},yAxis:v||{softMax:2,softMin:0},xAxis:{events:{afterSetExtremes:function(e){y&&y(e)}}},title:{text:""},plotOptions:{areaspline:{fillOpacity:S?.2:.4}},legend:{enabled:c},time:{timezoneOffset:k?0:N},series:n}))}),[w,Z,n,r,g,A,S,k,N,c,v,y,z,x]),(0,o.useEffect)((function(){var e;null!==T&&void 0!==T&&null!==(e=T.xAxis)&&void 0!==e&&e.length&&b&&T.xAxis[0].setExtremes(b.min,b.max)}),[T,b]);var M=u?{height:"450px"}:void 0;return(0,h.jsx)("div",{className:"chart-area",style:M,id:r,children:(0,h.jsx)("span",{className:"loader"})})}},8622:function(e,r,n){n(72791);var t=n(80184);r.Z=function(e){var r=e.options,n=e.selectedIndexes,s=e.setSelectedIndexes;return(0,t.jsx)("select",{className:"form-control",multiple:!0,onChange:function(e){var n=Object.values(e.target.selectedOptions).map((function(e){return e.text})).map((function(e){return r.indexOf(e)}));s(n)},children:r.map((function(e,r){return(0,t.jsx)("option",{value:n.includes(r),selected:n.includes(r),children:e},JSON.stringify(e))}))})}},19824:function(e,r,n){n.d(r,{EG:function(){return p},Hb:function(){return u},Vp:function(){return v},gJ:function(){return o},gY:function(){return i},jI:function(){return l},rO:function(){return c}});var t=n(74165),s=n(15861),a=n(54225),o=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/v1/network/overview",a.vT&&(n="/data/network-overview.json"),e.abrupt("return",(0,a.vn)(n,r));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),i=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/v1/network/servers",a.vT&&(n="/data/network-servers.json"),e.abrupt("return",(0,a.vn)(n,r));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),c=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/v1/graph?type=serverPie",a.vT&&(n="/data/graph-serverPie.json"),e.abrupt("return",(0,a.vn)(n,r));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),l=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/v1/network/sessionsOverview",a.vT&&(n="/data/network-sessionsOverview.json"),e.abrupt("return",(0,a.vn)(n,r));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),u=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/v1/network/playerbaseOverview",a.vT&&(n="/data/network-playerbaseOverview.json"),e.abrupt("return",(0,a.vn)(n,r));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),p=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/v1/network/pingTable",a.vT&&(n="/data/network-pingTable.json"),e.abrupt("return",(0,a.vn)(n,r));case 3:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),v=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r,n){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s="/v1/network/performanceOverview?servers=".concat(encodeURIComponent(JSON.stringify(n))),e.abrupt("return",(0,a.vn)(s,r));case 2:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}()},42557:function(e,r,n){n.r(r),n.d(r,{default:function(){return C}});var t=n(74165),s=n(1413),a=n(37762),o=n(15861),i=n(29439),c=n(72791),l=n(51425),u=n(2677),p=n(28282),v=n(93490),d=n(3546),f=n(11632),m=n(8622),h=n(39230),x=n(38646),b=n(19824),y=n(30014),k=n(89114),w=n(98442),Z=n(93433),g=n(79840),j=n(99220),A=n(27949),S=n(35751),N=n(28782),O=n(56080),E=n(80184),T=function(e){var r=e.data,n=e.yAxis;return(0,E.jsx)(S.Z,{id:"performance-"+(new Date).getTime(),series:r,legendEnabled:!0,tall:!0,yAxis:n})},z=function(e){var r=e.identifier,n=(0,j.m)(x.xc,[r]),t=n.data,s=n.loadingError;return s?(0,E.jsx)(N.ah,{error:s}):t?(0,E.jsx)(O.Z,{id:"network-performance-ping-chart",data:t}):(0,E.jsx)(A.aC,{style:{height:"450px"}})},M=function(e){var r=e.data,n=(0,h.$G)().t,t=(0,v.A)().networkMetadata,s=(0,c.useState)({players:[],tps:[],cpu:[],ram:[],entities:[],chunks:[],disk:[]}),a=(0,i.Z)(s,2),o=a[0],l=a[1];(0,c.useEffect)((function(){if(null!==r&&void 0!==r&&r.zones){for(var e={tps:[{value:r.zones.tpsThresholdMed,color:r.colors.low},{value:r.zones.tpsThresholdHigh,color:r.colors.med},{value:30,color:r.colors.high}],disk:[{value:r.zones.diskThresholdMed,color:r.colors.low},{value:r.zones.diskThresholdHigh,color:r.colors.med},{value:Number.MAX_VALUE,color:r.colors.high}]},n=[],t=0;t<r.servers.length;t++){var s=r.servers[t],a=r.values[t];n.push({serverName:s.serverName,values:a})}var o={players:[],tps:[],cpu:[],ram:[],entities:[],chunks:[],disk:[]},i="spline",c=function(e,r){return e},u=function(e){return e[0]-=e[0]%6e4,e};n.forEach((function(n,t){var s=c(r.colors.playersOnline),a=c(r.colors.high),l=(0,Z.Z)(e.tps);l.forEach((function(e){return e.color=c(e.color)}));var p=c(r.colors.cpu),v=c(r.colors.ram),d=c(r.colors.entities),f=c(r.colors.chunks),m=c(r.colors.high),h=(0,Z.Z)(e.disk);h.forEach((function(e){return e.color=c(e.color)})),o.players.push({name:n.serverName,type:i,tooltip:w.Md.zeroDecimals,data:n.values.playersOnline.map(u),color:s,yAxis:0}),o.tps.push({name:n.serverName,type:i,tooltip:w.Md.twoDecimals,data:n.values.tps.map(u),color:a,zones:l,yAxis:0}),o.cpu.push({name:n.serverName,type:i,tooltip:w.Md.twoDecimals,data:n.values.cpu.map(u),color:p,yAxis:0}),o.ram.push({name:n.serverName,type:i,tooltip:w.Md.zeroDecimals,data:n.values.ram.map(u),color:v,yAxis:0}),o.entities.push({name:n.serverName,type:i,tooltip:w.Md.zeroDecimals,data:n.values.entities.map(u),color:d,yAxis:0}),o.chunks.push({name:n.serverName,type:i,tooltip:w.Md.zeroDecimals,data:n.values.chunks.map(u),color:f,yAxis:0}),o.disk.push({name:n.serverName,type:i,tooltip:w.Md.zeroDecimals,data:n.values.disk.map(u),color:m,zones:h,yAxis:0})})),l(o)}}),[r,l]);var u=(0,c.useMemo)((function(){return r.servers&&Boolean(r.servers.filter((function(e){return!e.proxy})).length)}),[r]),d=(0,c.useMemo)((function(){return[{name:n("html.label.playersOnline"),icon:f.ILF,color:"light-blue",href:"players-online",element:(0,E.jsx)(T,{data:o.players,yAxis:w.px.PLAYERS_ONLINE})},{name:n("html.label.tps"),icon:f.HLz,color:"red",href:"tps",element:(0,E.jsx)(T,{data:o.tps,yAxis:w.px.TPS}),disabled:!u},{name:n("html.label.cpu"),icon:f.HLz,color:"amber",href:"cpu",element:(0,E.jsx)(T,{data:o.cpu,yAxis:w.px.CPU})},{name:n("html.label.ram"),icon:f.zvy,color:"light-green",href:"ram",element:(0,E.jsx)(T,{data:o.ram,yAxis:w.px.RAM_OR_DISK})},{name:n("html.label.entities"),icon:f.SPn,color:"purple",href:"entities",element:(0,E.jsx)(T,{data:o.entities,yAxis:w.px.ENTITIES}),disabled:!u},{name:n("html.label.loadedChunks"),icon:f.Wx7,color:"blue-grey",href:"chunks",element:(0,E.jsx)(T,{data:o.chunks,yAxis:w.px.CHUNKS}),disabled:!u},{name:n("html.label.diskSpace"),icon:f.vc8,color:"green",href:"disk",element:(0,E.jsx)(T,{data:o.disk,yAxis:w.px.RAM_OR_DISK})},{name:n("html.label.ping"),icon:f.CSz,color:"amber",href:"ping",element:t?(0,E.jsx)(z,{identifier:t.currentServer.serverUUID}):(0,E.jsx)(A.aC,{})}]}),[o,t,n,u]);return r&&Object.values(r).length?r.errors.length?(0,E.jsx)(N.NY,{error:r.errors[0]}):(0,E.jsx)(p.Z,{children:(0,E.jsx)(g.Z,{tabs:d})}):(0,E.jsx)(A.ym,{})},D=n(2936),I=n(61636),C=function(){var e,r=(0,I.a)().hasPermission,n=(0,h.$G)().t,Z=(0,v.A)().networkMetadata,g=(0,k.H)().updateRequested,j=(0,c.useState)([]),A=(0,i.Z)(j,2),S=A[0],N=A[1],O=(0,c.useState)([]),T=(0,i.Z)(O,2),z=T[0],C=T[1],U=(0,c.useState)([]),R=(0,i.Z)(U,2),_=R[0],H=R[1],P=r("page.network.performance");(0,c.useEffect)((function(){if(Z){var e=Z.servers;N(e);var r=e.findIndex((function(e){return e.serverName===Z.currentServer.serverName}));C([r]),H([r])}}),[Z,H]);var L=(0,c.useState)({}),G=(0,i.Z)(L,2),J=G[0],K=G[1],V=(0,c.useCallback)((0,o.Z)((0,t.Z)().mark((function e(){var r,n,o,i,c,l,u,p,v,d,f,m,h,y;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(P){e.next=2;break}return e.abrupt("return");case 2:r={servers:[],data:[],values:[],errors:[],zones:{},colors:{},timestamp_f:""},n=(new Date).getTime(),o=(0,a.Z)(_),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=33;break}return c=i.value,l=S[c],e.next=12,(0,x.rS)(n,encodeURIComponent(l.serverUUID));case 12:if(u=e.sent,p=u.data,v=u.error,!p){e.next=30;break}return r.servers.push(l),d=p.values,delete p.values,r.data.push(p),e.t0=r.values,e.next=23,(0,w.ET)(d);case 23:e.t1=e.sent,e.t0.push.call(e.t0,e.t1),r.zones=p.zones,r.colors=p.colors,r.timestamp_f=p.timestamp_f,e.next=31;break;case 30:v&&r.errors.push(v);case 31:e.next=7;break;case 33:e.next=38;break;case 35:e.prev=35,e.t2=e.catch(5),o.e(e.t2);case 38:return e.prev=38,o.f(),e.finish(38);case 41:return f=_.map((function(e){return S[e]})).map((function(e){return e.serverUUID})),e.next=44,(0,b.Vp)(n,f);case 44:m=e.sent,h=m.data,(y=m.error)&&r.errors.push(y),K((0,s.Z)((0,s.Z)({},r),{},{overview:h}));case 49:case"end":return e.stop()}}),e,null,[[5,35,38,41]])}))),[_,S,K,P]);(0,c.useEffect)((function(){V()}),[V,_,g]);var Y=z.length===_.length&&z.every((function(e,r){return e===_[r]}));return(0,E.jsx)(l.Z,{children:P&&(0,E.jsxs)("section",{className:"network-performance",children:[(0,E.jsx)(D.Z,{id:"row-network-performance-0",children:(0,E.jsx)(u.Z,{children:(0,E.jsx)(M,{data:J})})}),(0,E.jsxs)(D.Z,{id:"row-network-performance-1",children:[(0,E.jsx)(u.Z,{md:8,children:(0,E.jsx)(y.Z,{data:null===J||void 0===J||null===(e=J.overview)||void 0===e?void 0:e.numbers,servers:J.servers||[]})}),(0,E.jsx)(u.Z,{md:4,children:(0,E.jsxs)(p.Z,{children:[(0,E.jsx)(d.Z,{icon:f.xf3,color:"light-green",label:n("html.label.serverSelector")}),(0,E.jsx)(m.Z,{options:S.map((function(e){return e.serverName})),selectedIndexes:z,setSelectedIndexes:C}),(0,E.jsx)("button",{className:"btn "+(Y?"bg-transparent":"bg-theme"),onClick:function(){H(z)},disabled:Y,children:n("html.label.apply")})]})})]})]})})}}}]);
//# sourceMappingURL=2557.31885939.chunk.js.map
